# This file is automatically generated from https://github.com/sumup/github-workflows-sync
# Please do not edit it here

name: Continuous integration (CI)

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

on:
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    permissions:
      id-token: write
      contents: write
      checks: write
      pull-requests: write

    steps:
      - name: Install NPM dependencies
        uses: debitoor/nodejs-action/npm-install@v2
        with:
          debitoor-npm-token: ${{ secrets.DEBITOOR_NPM_TOKEN }}
          sumup-npm-token: ${{ secrets.GH_PACKAGES_TOKEN != '' && secrets.GH_PACKAGES_TOKEN || secrets.READ_PACKAGES_PAT }}
          skip-package-lock-commit: true
      - name: Lint
        run: npm run lint --if-present
      - name: ‚öôÔ∏è Build
        run: npm run build --if-present
      - name: üß™ NPM test
        run: npm test

    services:

      mongo:
        image: mongo:4.4
        ports:
          - 27017:27017
